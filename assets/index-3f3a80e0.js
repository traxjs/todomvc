(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();var we,w,vt,ue,Xe,gt,He,Pe={},bt=[],Vt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ue=Array.isArray;function ie(e,t){for(var n in t)e[n]=t[n];return e}function Ct(e){var t=e.parentNode;t&&t.removeChild(e)}function $t(e,t,n){var o,i,r,l={};for(r in t)r=="key"?o=t[r]:r=="ref"?i=t[r]:l[r]=t[r];if(arguments.length>2&&(l.children=arguments.length>3?we.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)l[r]===void 0&&(l[r]=e.defaultProps[r]);return be(e,l,o,i,null)}function be(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i??++vt};return i==null&&w.vnode!=null&&w.vnode(r),r}function pe(e){return e.children}function Ce(e,t){this.props=e,this.context=t}function de(e,t){if(t==null)return e.__?de(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?de(e):null}function xt(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return xt(e)}}function Ye(e){(!e.__d&&(e.__d=!0)&&ue.push(e)&&!Se.__r++||Xe!==w.debounceRendering)&&((Xe=w.debounceRendering)||gt)(Se)}function Se(){var e,t,n,o,i,r,l,a;for(ue.sort(He);e=ue.shift();)e.__d&&(t=ue.length,o=void 0,i=void 0,l=(r=(n=e).__v).__e,(a=n.__P)&&(o=[],(i=ie({},r)).__v=r.__v+1,We(a,r,i,n.__n,a.ownerSVGElement!==void 0,r.__h!=null?[l]:null,o,l??de(r),r.__h),wt(o,r),r.__e!=l&&xt(r)),ue.length>t&&ue.sort(He));Se.__r=0}function Pt(e,t,n,o,i,r,l,a,f,y){var c,$,h,p,g,A,C,S=o&&o.__k||bt,M=S.length;for(n.__k=[],c=0;c<t.length;c++)if((p=n.__k[c]=(p=t[c])==null||typeof p=="boolean"||typeof p=="function"?null:typeof p=="string"||typeof p=="number"||typeof p=="bigint"?be(null,p,null,null,p):Ue(p)?be(pe,{children:p},null,null,null):p.__b>0?be(p.type,p.props,p.key,p.ref?p.ref:null,p.__v):p)!=null){if(p.__=n,p.__b=n.__b+1,(h=S[c])===null||h&&p.key==h.key&&p.type===h.type)S[c]=void 0;else for($=0;$<M;$++){if((h=S[$])&&p.key==h.key&&p.type===h.type){S[$]=void 0;break}h=null}We(e,p,h=h||Pe,i,r,l,a,f,y),g=p.__e,($=p.ref)&&h.ref!=$&&(C||(C=[]),h.ref&&C.push(h.ref,null,p),C.push($,p.__c||g,p)),g!=null?(A==null&&(A=g),typeof p.type=="function"&&p.__k===h.__k?p.__d=f=St(p,f,e):f=Et(e,p,h,S,g,f),typeof n.type=="function"&&(n.__d=f)):f&&h.__e==f&&f.parentNode!=e&&(f=de(h))}for(n.__e=A,c=M;c--;)S[c]!=null&&(typeof n.type=="function"&&S[c].__e!=null&&S[c].__e==n.__d&&(n.__d=kt(o).nextSibling),Tt(S[c],S[c]));if(C)for(c=0;c<C.length;c++)It(C[c],C[++c],C[++c])}function St(e,t,n){for(var o,i=e.__k,r=0;i&&r<i.length;r++)(o=i[r])&&(o.__=e,t=typeof o.type=="function"?St(o,t,n):Et(n,o,o,i,o.__e,t));return t}function Et(e,t,n,o,i,r){var l,a,f;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(n==null||i!=r||i.parentNode==null)e:if(r==null||r.parentNode!==e)e.appendChild(i),l=null;else{for(a=r,f=0;(a=a.nextSibling)&&f<o.length;f+=1)if(a==i)break e;e.insertBefore(i,r),l=r}return l!==void 0?l:i.nextSibling}function kt(e){var t,n,o;if(e.type==null||typeof e.type=="string")return e.__e;if(e.__k){for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(o=kt(n)))return o}return null}function Ut(e,t,n,o,i){var r;for(r in n)r==="children"||r==="key"||r in t||Ee(e,r,null,n[r],o);for(r in t)i&&typeof t[r]!="function"||r==="children"||r==="key"||r==="value"||r==="checked"||n[r]===t[r]||Ee(e,r,t[r],n[r],o)}function Ze(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Vt.test(t)?n:n+"px"}function Ee(e,t,n,o,i){var r;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Ze(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||Ze(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")r=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o||e.addEventListener(t,r?et:Qe,r):e.removeEventListener(t,r?et:Qe,r);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Qe(e){return this.l[e.type+!1](w.event?w.event(e):e)}function et(e){return this.l[e.type+!0](w.event?w.event(e):e)}function We(e,t,n,o,i,r,l,a,f){var y,c,$,h,p,g,A,C,S,M,J,F,Z,K,X,k=t.type;if(t.constructor!==void 0)return null;n.__h!=null&&(f=n.__h,a=t.__e=n.__e,t.__h=null,r=[a]),(y=w.__b)&&y(t);try{e:if(typeof k=="function"){if(C=t.props,S=(y=k.contextType)&&o[y.__c],M=y?S?S.props.value:y.__:o,n.__c?A=(c=t.__c=n.__c).__=c.__E:("prototype"in k&&k.prototype.render?t.__c=c=new k(C,M):(t.__c=c=new Ce(C,M),c.constructor=k,c.render=Ft),S&&S.sub(c),c.props=C,c.state||(c.state={}),c.context=M,c.__n=o,$=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),k.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ie({},c.__s)),ie(c.__s,k.getDerivedStateFromProps(C,c.__s))),h=c.props,p=c.state,c.__v=t,$)k.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(k.getDerivedStateFromProps==null&&C!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(C,M),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(C,c.__s,M)===!1||t.__v===n.__v){for(t.__v!==n.__v&&(c.props=C,c.state=c.__s,c.__d=!1),c.__e=!1,t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(H){H&&(H.__=t)}),J=0;J<c._sb.length;J++)c.__h.push(c._sb[J]);c._sb=[],c.__h.length&&l.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(C,c.__s,M),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,p,g)})}if(c.context=M,c.props=C,c.__P=e,F=w.__r,Z=0,"prototype"in k&&k.prototype.render){for(c.state=c.__s,c.__d=!1,F&&F(t),y=c.render(c.props,c.state,c.context),K=0;K<c._sb.length;K++)c.__h.push(c._sb[K]);c._sb=[]}else do c.__d=!1,F&&F(t),y=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++Z<25);c.state=c.__s,c.getChildContext!=null&&(o=ie(ie({},o),c.getChildContext())),$||c.getSnapshotBeforeUpdate==null||(g=c.getSnapshotBeforeUpdate(h,p)),Pt(e,Ue(X=y!=null&&y.type===pe&&y.key==null?y.props.children:y)?X:[X],t,n,o,i,r,l,a,f),c.base=t.__e,t.__h=null,c.__h.length&&l.push(c),A&&(c.__E=c.__=null),c.__e=!1}else r==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Wt(n.__e,t,n,o,i,r,l,f);(y=w.diffed)&&y(t)}catch(H){t.__v=null,(f||r!=null)&&(t.__e=a,t.__h=!!f,r[r.indexOf(a)]=null),w.__e(H,t,n)}}function wt(e,t){w.__c&&w.__c(t,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(o){o.call(n)})}catch(o){w.__e(o,n.__v)}})}function Wt(e,t,n,o,i,r,l,a){var f,y,c,$=n.props,h=t.props,p=t.type,g=0;if(p==="svg"&&(i=!0),r!=null){for(;g<r.length;g++)if((f=r[g])&&"setAttribute"in f==!!p&&(p?f.localName===p:f.nodeType===3)){e=f,r[g]=null;break}}if(e==null){if(p===null)return document.createTextNode(h);e=i?document.createElementNS("http://www.w3.org/2000/svg",p):document.createElement(p,h.is&&h),r=null,a=!1}if(p===null)$===h||a&&e.data===h||(e.data=h);else{if(r=r&&we.call(e.childNodes),y=($=n.props||Pe).dangerouslySetInnerHTML,c=h.dangerouslySetInnerHTML,!a){if(r!=null)for($={},g=0;g<e.attributes.length;g++)$[e.attributes[g].name]=e.attributes[g].value;(c||y)&&(c&&(y&&c.__html==y.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(Ut(e,h,$,i,a),c)t.__k=[];else if(Pt(e,Ue(g=t.props.children)?g:[g],t,n,o,i&&p!=="foreignObject",r,l,r?r[0]:n.__k&&de(n,0),a),r!=null)for(g=r.length;g--;)r[g]!=null&&Ct(r[g]);a||("value"in h&&(g=h.value)!==void 0&&(g!==e.value||p==="progress"&&!g||p==="option"&&g!==$.value)&&Ee(e,"value",g,$.value,!1),"checked"in h&&(g=h.checked)!==void 0&&g!==e.checked&&Ee(e,"checked",g,$.checked,!1))}return e}function It(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(o){w.__e(o,n)}}function Tt(e,t,n){var o,i;if(w.unmount&&w.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||It(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){w.__e(r,t)}o.base=o.__P=null,e.__c=void 0}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&Tt(o[i],t,n||typeof e.type!="function");n||e.__e==null||Ct(e.__e),e.__=e.__e=e.__d=void 0}function Ft(e,t,n){return this.constructor(e,n)}function Gt(e,t,n){var o,i,r;w.__&&w.__(e,t),i=(o=typeof n=="function")?null:n&&n.__k||t.__k,r=[],We(t,e=(!o&&n||t).__k=$t(pe,null,[e]),i||Pe,Pe,t.ownerSVGElement!==void 0,!o&&n?[n]:i?null:t.firstChild?we.call(t.childNodes):null,r,!o&&n?n:i?i.__e:t.firstChild,o),wt(r,e)}we=bt.slice,w={__e:function(e,t,n,o){for(var i,r,l;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),l=i.__d),l)return i.__E=i}catch(a){e=a}throw e}},vt=0,Ce.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ie({},this.state),typeof e=="function"&&(e=e(ie({},n),this.props)),e&&ie(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Ye(this))},Ce.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Ye(this))},Ce.prototype.render=pe,ue=[],gt=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,He=function(e,t){return e.__v.__b-t.__v.__b},Se.__r=0;let ae;function tt(e){e.value=null,e.next=ae,ae=e}function nt(e,t){if(ae){const n=ae;return ae=n.next,n.value=e,n.next=t,n}}class Me{constructor(){this._size=0}get head(){return this._head}get size(){return this._size}add(t){const n=this._head;let o=nt(t,n)||{value:t,next:n};return this._head=o,this._size++,o}insert(t){let n=this._head,o;if(!n)o=t()||void 0,o!==void 0&&this.add(o);else{let i;for(;i||n;){if(o=t(i==null?void 0:i.value,n==null?void 0:n.value)||void 0,o!==void 0){let r=nt(o,n)||{value:o,next:n};i?i.next=r:this._head=r,this._size++;return}i=n,n=n==null?void 0:n.next}}}peek(){return this._head?this._head.value:void 0}shift(){const t=this._head;if(t){const n=t.value;return this._head=t.next,this._size--,tt(t),n}}remove(t){let n=this._head,o=null;for(;n;){if(n.value===t)return o?(o.next=n.next,this._size--,tt(n)):this.shift(),!0;o=n,n=n.next}return!1}}var ee;(function(e){e.NotATraxObject="",e.Object="O",e.Array="A",e.Store="S",e.Processor="P"})(ee||(ee={}));const E=Object.freeze({Info:"!LOG",Warning:"!WRN",Error:"!ERR",CycleStart:"!CS",CycleComplete:"!CC",New:"!NEW",Dispose:"!DEL",Set:"!SET",Get:"!GET",ProcessorDirty:"!DRT",ProcessorSkipped:"!SKP",ProcessingStart:"!PCS",ProcessingPause:"!PCP",ProcessingResume:"!PCR",ProcessingEnd:"!PCE"});var Kt=globalThis&&globalThis.__awaiter||function(e,t,n,o){function i(r){return r instanceof n?r:new n(function(l){l(r)})}return new(n||(n=Promise))(function(r,l){function a(c){try{y(o.next(c))}catch($){l($)}}function f(c){try{y(o.throw(c))}catch($){l($)}}function y(c){c.done?r(c.value):i(c.value).then(a,f)}y((o=o.apply(e,t||[])).next())})};function Jt(e,t,n){let o=0,i=1e3,r,l;const a=new Map,f=[];let y="None",c=-1,$=-1,h=null,p=0;function g(){return h===null&&($=-1,c++,h=Promise.resolve().then(A),C(E.CycleStart)),$++,c+":"+$}function A(){X(),C(E.CycleComplete),h=null}function C(v){v===E.CycleComplete&&n&&n();const N=Date.now(),m=p!==0?N-p:0;p=N,z(v,{elapsedTime:m},e)}const S=1,M=2,J=3,F=new Me;function Z(v){F.add(v)}function K(v){let N=F.shift();for(;N&&N!==v;)H("[trax/processing context] Contexts must be ended or paused before parent:",N.id),N=F.shift()}function X(){if(F.size!==0){let v=F.shift();for(;v;)H("[trax/processing context] Contexts must be ended or paused before cycle ends:",v.id),v=F.shift()}}function k(v,N){let m=S;const j=Object.assign({processId:v},N),x={get id(){return v},pause(){m!==S?H("[trax/processing context] Only started or resumed contexts can be paused:",v):(K(x),z(E.ProcessingPause,j,e),m=M)},resume(){m!==M?H("[trax/processing context] Only paused contexts can be resumed:",v):(Z(x),z(E.ProcessingResume,j,e),m=S)},end(){m===J?H("[trax/processing context] Contexts cannot be ended twice:",v):(K(x),z(E.ProcessingEnd,j,e),m=J)}};return Z(x),x}function H(...v){z(E.Error,De(v))}function z(v,N,m,j){let x;if(o>=i&&i>1?(x=r,r=r.next,o--,x.id="",x.type="",x.next=x.data=x.parentId=void 0):x={id:"",type:""},Bt(e,x,v,t,N,m),x.id=g(),x.parentId=j,x.type!==""){r===void 0?(r=l=x,o=1):(l.next=x,l=x,o++);for(const G of f)try{G({id:x.id,type:x.type,data:x.data})}catch{}re(x.type,x)}if(y!=="None"){const G=x.type;if(G!==E.CycleStart&&G!==E.CycleComplete&&(G!==E.Get||y==="All")){let te=Xt(x.type,x.data),Y="";x.parentId&&(Y=" - parent:"+x.parentId),console.log(`${x.id} ${x.type}${te?" - "+te:""}${Y}`)}}return x}function re(v,N){const m=a.get(v);if(m){const j=m.filter(x=>!x({id:N.id,type:N.type,data:N.data,parentId:N.parentId}));j.length===0?a.delete(v):a.set(v,j)}}return{get consoleOutput(){return y},set consoleOutput(v){y=v},event(v,N,m){z(v,N,m)},info(...v){z(E.Info,De(v))},warn(...v){z(E.Warning,De(v))},error:H,set maxSize(v){const N=i;if(v<0?i=-1:v<2?i=2:i=v,i>0&&i<N&&i<o){let m=o-i;for(;r&&m;)r=r.next,m--,o--}},startProcessingContext(v,N){let m=v.name;m.charAt(0)==="!"&&N!==e&&(H(`Processing Context name cannot start with reserved prefix: ${m}`),v.name=m.replace(/\!+/,""));const j=F.peek(),x=j?j.id:void 0,G=z(E.ProcessingStart,v,e,x);return k(G.id,v)},get maxSize(){return i},get size(){return o},scan(v){let N=r,m=!0;for(;m&&N;)try{v(N)===!1&&(m=!1),N=N.next}catch{}},lastEvent(){return l},awaitEvent(v,N){return Kt(this,void 0,void 0,function*(){if(v===""||v==="*")return z(E.Error,`[trax/eventStream.await] Invalid event type: '${v}'`),{id:l.id,type:l.type,data:l.data};let m=a.get(v);m===void 0&&(m=[],a.set(v,m));let j,x=new Promise(G=>{j=G});return m.push(G=>qt(G,N)?(j(G),!0):!1),x})},subscribe(v,N){let m;return v==="*"?m=j=>N(j):m=j=>{j.type===v&&N(j)},f.push(m),m},unsubscribe(v){const N=f.indexOf(v);return N>-1?(f.splice(N,1),!0):!1}}}function qt(e,t){if(t===void 0||e.data===void 0)return!0;const n=JSON.parse(e.data);if(typeof t!="object"&&t!==null)return n===t;if(t!==null&&n!==null&&typeof n=="object"){for(const o of Object.keys(t)){const i=n[o],r=t[o];if(r instanceof RegExp)if(typeof i=="string"){if(i.match(r)===null)return!1}else return!1;else if(i!==t[o])return!1}return!0}return!1}function De(e){let t="";const n=[];for(let o of e){const i=typeof o;i==="string"||i==="number"||i==="boolean"||o===null?t?t+=" "+o:t=""+o:(t&&(n.push(t),t=""),n.push(o))}if(t&&n.push(t),n.length!==0)return n.length===1?n[0]:n}function Bt(e,t,n,o,i,r){let l=!1,a="";if(n==="")l=!0,a="Event type cannot be empty";else if(n.charAt(0)==="!"&&r!==e&&n!==E.Error&&n!==E.Warning&&n!==E.Info)l=!0,a="Event type cannot start with reserved prefix: "+n;else if(t.type=n,i!==void 0)try{o?t.data=o(i):t.data=JSON.stringify(i)}catch(f){l=!0,a="Event strinfication error: "+f}else i=void 0;l&&(t.type=E.Error,t.data=a)}function Xt(e,t){if(!t||!e||e.charAt(0)!=="!")return t;try{const n=JSON.parse(""+t);if(e===E.CycleStart||e===E.CycleComplete)return"0";if(e===E.Info||e===E.Warning||e===E.Error)return`${t.replace(/"/g,"")}`;if(e===E.ProcessingPause||e===E.ProcessingResume||e===E.ProcessingEnd)return`${JSON.parse(t).processId}`;if(e===E.ProcessingStart){const o=n;if(o.name==="!StoreInit")return`${o.name} (${o.storeId})`;if(o.name==="!Compute"){const i=o.isRenderer?" R":"";return`${o.name} #${o.computeCount} (${o.processorId}) P${o.processorPriority} ${o.trigger}${i}`}else return o.name==="!Reconciliation"?`${o.name} #${o.index} - ${o.processorCount} processor${o.processorCount!==1?"s":""}`:o.name==="!ArrayUpdate"?`${o.name} (${o.objectId})`:`${o.name}`}else if(e===E.New){const o=n;return o.objectId===void 0?t:`${o.objectType}: ${o.objectId}`}else if(e===E.Dispose){const o=n;return o.objectId===void 0?t:`${o.objectId}`}else if(e===E.Get){const o=n;return`${o.objectId}.${o.propName} -> ${Oe(o.propValue)}`}else if(e===E.Set){const o=n;return`${o.objectId}.${o.propName} = ${Oe(o.toValue)} (prev: ${Oe(o.fromValue)})`}else if(e===E.ProcessorDirty){const o=n;return`${o.processorId} <- ${o.objectId}.${o.propName}`}else if(e===E.ProcessorSkipped)return`${n.processorId}`}catch{}return t}function Oe(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="object"){const t=U(e);return t?t.id:JSON.stringify(e)}else return typeof e=="string"?"'"+e.replace(/\'/g,"\\'")+"'":""+e}function ot(){}function ze(e,t,n,o=ot,i=ot){let r=null,l,a,f,y;return(...p)=>{o(),r=t();let g,A=!0;l=void 0;let C;try{C=e(...p),C&&C.next&&typeof C.next=="function"?(l=C,g=C.next(),A=!!g.done):C&&typeof C=="object"&&typeof C.then=="function"&&typeof C.catch=="function"&&C.catch(S=>{n(S)})}catch(S){n(S)}return i(A),A?(r.end(),r=null):(r.pause(),c(g,l)),l!==void 0?(a&&y&&y("Processing Cancelled"),a=f=y=void 0,A?Promise.resolve(C):(a=new Promise((S,M)=>{f=S,y=M}),a)):C};function c(p,g){if(p&&!p.done){const A=p.value,C=S=>{n(S)};A&&A.then?A.then(S=>{$(S,g)}).catch(C):Promise.resolve().then(()=>{$(A,g)}).catch(C)}}function $(p,g){if(g!==l||!r)return;if(o()===!1){h();return}r.resume();let A,C=!0;try{A=g.next(p),C=!!A.done}catch(S){n(S),C=!0,y&&y(S),h()}i(C),C?(r.end(),f&&f(A.value)):(r.pause(),c(A,g))}function h(){f=y=void 0}}function Yt(e,t,n,o,i,r,l,a,f,y,c=!0,$=!1){let h=0,p=-1,g=!0,A=!1,C=!1,S=new Set,M=new Set,J,F=-1,Z="DirectCall",K;function X(m){l({type:E.Error,data:m})}let k,H;v(o);const z={get id(){return e},get target(){return f},get reconciliationId(){return F},get autoCompute(){return c},get priority(){return n},get computeCount(){return h},get dirty(){return g},get isRenderer(){return $},get disposed(){return A},get dependencies(){return A?[]:Array.from(S).sort()},onDirty:null,notifyChange(m,j){if(A||C)return!1;if(!g&&S.has(re(m,j))){if(g=!0,l({type:E.ProcessorDirty,processorId:e,objectId:m,propName:j}),this.onDirty)try{this.onDirty()}catch(x){X(`(${e}) onDirty callback execution error: ${x}`)}return!0}return!1},registerDependency(m,j,x){!C||A||x==="then"&&m.then===void 0||(S.add(re(j,x)),M.add(j),rn(z,U(r(j))))},compute(m=!1,j="DirectCall",x=-1){var G;if(A||!m&&!c&&(j==="Init"||j==="Reconciliation"))return;let te=!0;if(f!==null&&j!=="TargetRead"&&(te=((G=U(f))===null||G===void 0?void 0:G.hasExternalPropListener)||!1),te&&g||m){g=!1,S.clear(),J=M,M=new Set,h++,F=x,Z=j,H&&(v(H),H=void 0),K={processorId:e,processorName:t,computeCount:h,maxComputeCount:p};let Y;f!==null?Y=k(f,K):Y=k(K),Y&&typeof Y=="object"&&typeof Y.catch=="function"&&Y.catch(()=>{}),c&&S.size===0&&X(`(${e}) No dependencies found: processor will never be re-executed`)}else te||l({type:E.ProcessorSkipped,processorId:e})},updateComputeFn(m){H=m},dispose(){if(A)return!1;A=!0,C=!1,y&&y(e);for(const m of M)lt(z,U(r(m)));return l({type:E.Dispose,objectId:e}),!0}};return l({type:E.New,objectId:e,objectType:ee.Processor}),z.compute(!1,"Init"),z;function re(m,j){return m+"."+j}function v(m){k=ze(m,()=>a({type:"!PCS",name:"!Compute",processorId:e,processorPriority:n,trigger:Z,isRenderer:$,computeCount:h}),j=>{X(`(${e}) Compute error: ${j}`)},()=>(C=!0,i.add(z),A?!1:void 0),j=>{C=!1,i.shift(),p=(K==null?void 0:K.maxComputeCount)||-1,j&&p>-1&&h>=p?z.dispose():N()})}function N(){if(J){for(const m of J)M.has(m)||lt(z,U(r(m)));J=void 0}}}var Zt=globalThis&&globalThis.__awaiter||function(e,t,n,o){function i(r){return r instanceof n?r:new n(function(l){l(r)})}return new(n||(n=Promise))(function(r,l){function a(c){try{y(o.next(c))}catch($){l($)}}function f(c){try{y(o.throw(c))}catch($){l($)}}function y(c){c.done?r(c.value):i(c.value).then(a,f)}y((o=o.apply(e,t||[])).next())})};const Fe=new WeakMap,_e=Symbol("trax.proxy.target"),rt=Symbol("trax.dict.size"),it=/(\/|\>|\.|\%)/g,me="root",Qt=":",en="*",tn="-",nn="$",ct="$",Ae="%",st=">",on="/",ve="☆trax.dictionary.size☆";function rn(e,t){t&&(t.propListeners||(t.propListeners=new Set),t.propListeners.add(e),t.contentProcessors!==void 0&&!t.hasExternalPropListener&&(!e.target||U(e.target)!==t)&&(t.hasExternalPropListener=!0))}function lt(e,t){if(t&&t.propListeners)if(t.propListeners.delete(e),t.propListeners.size===0)t.propListeners=void 0,t.hasExternalPropListener=!1;else if(t.contentProcessors){let n=!1;for(const o of t.propListeners)!n&&(!o.target||U(o.target)!==t)&&(n=!0);t.hasExternalPropListener=n}else t.hasExternalPropListener=!1}function U(e){return e?Fe.get(e[_e]||e):void 0}function ge(e,t,n,o){const i={id:t,type:n,storeId:o,propListeners:void 0,computedProps:void 0,computedContent:void 0,awLevel:void 0,dictSize:void 0,contentProcessors:void 0,hasExternalPropListener:!1,lastContentProcessorCheck:-1};return Fe.set(e[_e]||e,i),i}function cn(e){Fe.delete(e[_e]||e)}function sn(){const e={};let t=0;const n=new Map,o=new Map,i=new Map,r=new Map,l=Array.isArray;let a=0,f=0,y=new Me,c=new Me,$=0;const h=Jt(e,s=>JSON.stringify(s,(u,d)=>{if(typeof d=="object"){const b=U(d);return b?`[TRAX ${b.id}]`:d}else if(typeof d=="function")return"[Function]";return d}),()=>{N(),g.processChanges()});let p=!1;const g={log:h,createStore(s,u){return Y(s,"",u)},get pendingChanges(){return c.size>0},processChanges(){if(c.size>0){$++;const s=z({type:"!PCS",name:"!Reconciliation",index:$,processorCount:f});let u=c.shift();for(;u;)u.reconciliationId===$?k(`(${u.id}) Circular reference: Processors cannot run twice during reconciliation`):u.compute(!1,"Reconciliation",$),u=c.shift();s.end()}},reconciliation(){return Zt(this,void 0,void 0,function*(){const s=h.lastEvent();s&&s.type!==E.CycleComplete&&(yield h.awaitEvent(E.CycleComplete))})},isTraxObject(s){return U(s)!==void 0},getTraxId(s){var u;return((u=U(s))===null||u===void 0?void 0:u.id)||""},getTraxObjectType(s){var u;return((u=U(s))===null||u===void 0?void 0:u.type)||ee.NotATraxObject},getProcessor(s){return i.get(s)},getStore(s){return n.get(s)},getData(s){return m(s)||void 0},getActiveProcessor(){return y.peek()},updateArray(s,u){if(!l(s)||!l(u)){k("updateArray: Invalid argument (array expected)");return}const d=A(s),b=z({type:E.ProcessingStart,name:"!ArrayUpdate",objectId:d}),_=s.length,L=u.length;for(let D=0;L>D;D++)s[D]=u[D];if(L<_){for(let D=L;_>D;D++)s[D]=void 0;s.splice(L,_-L)}b.end()},updateDictionary(s,u){if(s===null||typeof s!="object"){k("updateDictionary: Invalid argument (object expected)");return}const d=A(s),b=z({type:E.ProcessingStart,name:"!DictionaryUpdate",objectId:d}),_=g.getObjectKeys(s),L=g.getObjectKeys(u);for(const D of _)L.includes(D)||delete s[D];for(const D of L)s[D]=u[D];b.end()},getObjectKeys(s){return U(s)?s[rt]?Object.keys(s):[]:Object.keys(s)}};function A(s){const u=U(s);if(u){X(u);const d=y.peek();return d&&(u.computedContent?d.id!==u.computedContent&&k(`Computed content conflict: ${u.id} can only be changed by ${u.computedContent}`):u.computedContent=d.id),u.id}return""}const C={get(s,u){const d=U(s);if(u===_e)return s;if(u!=="toJSON"){if(typeof u=="string"){let b,_=!1;if(d){const L=y.peek();L&&L.registerDependency(s,d.id,u),v(d),_=u!=="then"&&u!=="constructor"||b!==void 0,s[u]!==void 0&&(b=s[u]=S(s[u],u,d)),_&&H({type:"!GET",objectId:d.id,propName:u,propValue:b})}else b=s[u];return b}else if(u===rt&&d){let b=d.dictSize;b===void 0&&(d.dictSize=b=Object.keys(s).length);const _=y.peek();return _&&_.registerDependency(s,d.id,ve),v(d),H({type:"!GET",objectId:d.id,propName:ve,propValue:b}),b}return s[u]}},set(s,u,d){if(typeof u!="symbol"){const b=s[u],_=U(s);if(_){const L=y.peek();if(X(_),L){let D=_.computedContent||void 0;if(!_.computedContent){let q=_.computedProps;q||(q=_.computedProps={}),D=q[u],D||(q[u]=L.id)}D&&D!==L.id&&(_.computedContent?k(`Computed content conflict: ${_.id}.${u} can only be set by ${D}`):k(`Computed property conflict: ${_.id}.${u} can only be set by ${D}`),d=b)}else _.computedContent&&(k(`Computed content conflict: ${_.id}.${u} can only be set by ${_.computedContent}`),d=b);if(b!==d){let D=!1,q=!1;if(l(s)){const ce=s.length;d=s[u]=S(d,""+u,_),D=s.length!==ce}else{d=s[u]=S(d,""+u,_);const ce=_.dictSize;if(b===void 0&&ce!==void 0){const he=Object.keys(s).length;he!==ce&&(_.dictSize=he,q=!0)}}H({type:"!SET",objectId:_.id,propName:u,fromValue:b,toValue:d}),typeof u=="string"&&re(_,u),D&&re(_,"length"),q&&re(_,ve)}}else s[u]=d}return!0},deleteProperty(s,u){if(typeof u=="string"&&u in s){const d=U(s);return d&&d.dictSize&&(d.dictSize--,re(d,ve)),delete s[u],!0}return!1}};function S(s,u,d){if(s!=null&&typeof s=="object"){if(s[_e])return s;let b=U(s);if(b)return s;let _=0;if(u[0]===ct){let L=0,D=u.length;for(;L<D&&u[L]===ct;)_++,L++}else d.awLevel&&(_=d.awLevel);if(_!==1&&!b&&(s=M(d.id+en+u,s,d.storeId,!0),_&&_>1)){let L=U(s);L&&!L.awLevel&&(L.awLevel=_-1)}}return s}function M(s,u,d,b=!1){const _=m(s);if(_)if(u&&b){const q=s;for(;t++,s=q+nn+t,!!o.get(s););}else return _;let L;l(u)?L=ge(u,s,ee.Array,d):L=ge(u,s,ee.Object,d),H({type:"!NEW",objectId:s,objectType:L.type});const D=new Proxy(u,C);return j(s,D,d),D}return g;function J(s){const u=s.priority;c.insert((d,b)=>{if(!b||u<=b.priority)return s})}function F(s,u){let d="";if(l(s)?d=s.map(b=>{if(typeof b=="object"){const _=U(b);if(_){const L=_.id;if(u){const D=u.length+1;if(L.length>D&&L.slice(0,D)===u+"/")return L.slice(D)}return L.replace(/\//g,tn)}else return k("Invalid id param: not a trax object"),Z()}return""+b}).join(Qt):d=s,d.match(it)){const b=d.replace(it,"");k(`Invalid trax id: ${d} (changed into ${b})`),d=b}return d}function Z(){return""+Math.floor(Math.random()*1e5)}function K(s,u,d){let b=F(s,u);return d?u+Ae+b:u+on+b}function X(s,u){if(s){d(s.computedContent)&&(s.computedContent=void 0);const b=s.computedProps;b&&u&&d(b[u])&&(b[u]=void 0)}function d(b){return!!(b&&!i.has(b))}}function k(s){h.error("[TRAX] "+s)}function H(s){s.type===E.Error?k(""+s.data):s.type===E.Info?h.info(""+s.data):h.event(s.type,s,e)}function z(s){return h.startProcessingContext(s,e)}function re(s,u){const d=s.propListeners;if(d)for(const b of d)b.notifyChange(s.id,u)&&J(b)}function v(s){if(s.lastContentProcessorCheck!==$&&(s.lastContentProcessorCheck=$,s.contentProcessors))for(const u of s.contentProcessors)u.compute(!1,"TargetRead")}function N(){!p&&globalThis.__TRAX_DEVTOOLS__&&(p=!0,console.log("[Trax] DevTools detected"),globalThis.__TRAX_DEVTOOLS__.connectTrax(g))}function m(s){const u=o.get(s);return u&&u.deref()||null}function j(s,u,d){o.set(s,new WeakRef(u)),G(s,d)}function x(s,u,d){if(u&&cn(u),d){if(d.contentProcessors){for(const b of d.contentProcessors)b.dispose();d.contentProcessors=void 0}te(s,d.storeId)}return H({type:"!DEL",objectId:s}),o.delete(s)}function G(s,u){let d=r.get(u);d||(d=new Set,r.set(u,d)),d.add(s)}function te(s,u){let d=r.get(u);d&&d.delete(s)}function Y(s,u,d,b){const _=Je(s,u,!0);let L,D=!0,q=!1;const ce=z({type:"!PCS",name:"!StoreInit",storeId:_}),he=typeof d=="function"?d:P=>{P.init(d)},ye={get id(){return _},get root(){return L},get disposed(){return q},createStore(P,I){const O=Y(P,_,I,Ot);return G(O.id,_),O},init(P,I){return D?L=je(me,P,!0,I):k(`(${_}) Store.init can only be called during the store init phase`),L},add(P,I,O){return je(P,I,!1,O)},get(P){const I=K(P,_,!1);return m(I)||void 0},remove(P){const I=U(P);let O="";if(I)if(O=I.id,I.type===ee.Processor)k(`(${O}) Processors cannot be disposed through store.remove()`);else if(I.type===ee.Store)k(`(${O}) Stores cannot be disposed through store.remove()`);else if(O.slice(_.length+1)===me)k(`(${O}) Root objects cannot be disposed through store.remove()`);else return x(O,P,I);return!1},compute(P,I,O,R){let V=K(P,_,!0);return qe(V,"",I,null,O,R)},getProcessor(P){const I=K(P,_,!0);return i.get(I)},getStore(P){const I=Je(P,_,!1);return n.get(I)},dispose(){return Ne()},async(P,I){let O="[ASYNC]",R;typeof P=="string"?(O=P,R=I):R=P;const V=ze(R,()=>h.startProcessingContext({name:_+"."+O+"()",storeId:_}),B=>{k(`(${_}.${O}) error: ${B}`)});return V.updateAsyncName=B=>{O=B},V}};ge(ye,_,ee.Store,""),H({type:"!NEW",objectId:_,objectType:ee.Store}),n.set(_,ye);function Ne(){if(q)return!1;n.delete(_),q=!0,b&&b(_);const P=r.get(_);if(P){r.delete(_);const I=_.length;let O,R;for(const V of P)R=void 0,O=V.charAt(I),O===st?(R=n.get(V),R&&R.dispose()):O===Ae?(R=i.get(V),R&&R.dispose()):x(V)}return H({type:"!DEL",objectId:_}),!0}function Ot(P){te(P,_)}function At(P){i.delete(P)&&(f--,te(P,_))}function Rt(P){const I=P;for(const O of Object.keys(I))if(typeof I[O]=="function"){const R=I[O];typeof R.updateAsyncName=="function"?R.updateAsyncName(O):I[O]=ze(R,()=>h.startProcessingContext({name:_+"."+O+"()",storeId:_}),V=>{k(`(${_}.${O}) error: ${V}`)})}}let ne;try{ne=he(ye),D=!1,ne!==void 0&&(ne!==null&&typeof ne=="object"?Rt(ne):(k(`createStore init function must return a valid object (${_})`),ne={}))}catch(P){k(`createStore init error (${_}): ${P}`),ne={}}if(D=!1,Ht(),ne===void 0)return ce.end(),ye;const se=ne;if(typeof se.dispose=="function"){const P=se.dispose;se.dispose=()=>{P.call(ne),Ne()}}else se.dispose=Ne;return se.id&&k(`Store id will be overridden and must not be provided by init function (${_})`),se.id=_,ce.end(),se;function Ht(){L==null&&(k(`(${_}) createStore init must define a root object - see also: init()`),L=je(me,{},!0))}function Mt(){return q?(k(`(${_}) Stores cannot be used after being disposed`),!1):!0}function Je(P,I,O=!0){let R=F(P);I!==""&&(R=I+st+R);let V="";if(O){let B=n.get(R),Q=0;for(;B;)V=""+ ++Q,B=B=n.get(R+V)}return R+V}function je(P,I,O,R){let V=F(P,_);if(O||V===me&&(k("Store.add: Invalid id 'root' (reserved)"),V=Z()),Mt()){(I==null||typeof I!="object")&&(k(`(${_}) Store.add(${P}): Invalid init object parameter: [${typeof I}]`),I={});const B=M(K(V,_,!1),I,_);if(R!==void 0){const Q=U(B),Be=[];for(const Le of Object.getOwnPropertyNames(R)){const zt=`${_}${Ae}${V}[${Le}]`;Be.push(qe(zt,Le,R[Le],B,!0,!1))}Q.contentProcessors=Be}return B}else return I}function qe(P,I,O,R,V,B){let Q=i.get(P);return Q?(Q.updateComputeFn(O),Q):(a++,f++,Q=Yt(P,I,a,O,y,m,H,z,R,At,V,B),ge(Q,P,ee.Processor,_),i.set(P,Q),G(P,_),Q)}}}const oe=sn();var fe,W,Re,ut,ke=0,Nt=[],$e=[],at=w.__b,dt=w.__r,_t=w.diffed,ft=w.__c,pt=w.unmount;function Ge(e,t){w.__h&&w.__h(W,e,ke||t),ke=0;var n=W.__H||(W.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:$e}),n.__[e]}function ln(e){return ke=1,un(Dt,e)}function un(e,t,n){var o=Ge(fe++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):Dt(void 0,t),function(a){var f=o.__N?o.__N[0]:o.__[0],y=o.t(f,a);f!==y&&(o.__N=[y,o.__[1]],o.__c.setState({}))}],o.__c=W,!W.u)){var i=function(a,f,y){if(!o.__c.__H)return!0;var c=o.__c.__H.__.filter(function(h){return h.__c});if(c.every(function(h){return!h.__N}))return!r||r.call(this,a,f,y);var $=!1;return c.forEach(function(h){if(h.__N){var p=h.__[0];h.__=h.__N,h.__N=void 0,p!==h.__[0]&&($=!0)}}),!(!$&&o.__c.props===a)&&(!r||r.call(this,a,f,y))};W.u=!0;var r=W.shouldComponentUpdate,l=W.componentWillUpdate;W.componentWillUpdate=function(a,f,y){if(this.__e){var c=r;r=void 0,i(a,f,y),r=c}l&&l.call(this,a,f,y)},W.shouldComponentUpdate=i}return o.__N||o.__}function jt(e,t){var n=Ge(fe++,3);!w.__s&&Lt(n.__H,t)&&(n.__=e,n.i=t,W.__H.__h.push(n))}function Ke(e){return ke=5,an(function(){return{current:e}},[])}function an(e,t){var n=Ge(fe++,7);return Lt(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function dn(){for(var e;e=Nt.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(xe),e.__H.__h.forEach(Ve),e.__H.__h=[]}catch(t){e.__H.__h=[],w.__e(t,e.__v)}}w.__b=function(e){W=null,at&&at(e)},w.__r=function(e){dt&&dt(e),fe=0;var t=(W=e.__c).__H;t&&(Re===W?(t.__h=[],W.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=$e,n.__N=n.i=void 0})):(t.__h.forEach(xe),t.__h.forEach(Ve),t.__h=[],fe=0)),Re=W},w.diffed=function(e){_t&&_t(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Nt.push(t)!==1&&ut===w.requestAnimationFrame||((ut=w.requestAnimationFrame)||_n)(dn)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==$e&&(n.__=n.__V),n.i=void 0,n.__V=$e})),Re=W=null},w.__c=function(e,t){t.some(function(n){try{n.__h.forEach(xe),n.__h=n.__h.filter(function(o){return!o.__||Ve(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],w.__e(o,n.__v)}}),ft&&ft(e,t)},w.unmount=function(e){pt&&pt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{xe(o)}catch(i){t=i}}),n.__H=void 0,t&&w.__e(t,n.__v))};var ht=typeof requestAnimationFrame=="function";function _n(e){var t,n=function(){clearTimeout(o),ht&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);ht&&(t=requestAnimationFrame(n))}function xe(e){var t=W,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),W=t}function Ve(e){var t=W;e.__c=e.__(),W=t}function Lt(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function Dt(e,t){return typeof t=="function"?t(e):t}const yt="Preact",mt=new Map;let fn=0;function pn(e,t){return e+":"+t}function hn(){return oe.getStore(yt)||oe.createStore(yt,{})}let yn=hn();function mn(e,t,n,o){n.jsx="";let i=mt.get(e);i===void 0?i=1:i++,mt.set(e,i);const r=pn(e,i);n.id=r;const l=yn.compute(r,()=>{try{n.jsx=t(n.props)}catch(a){oe.log.error(`[@traxjs/trax-preact] Processing Error: ${a}`)}},!1,!0);l.onDirty=()=>{queueMicrotask(()=>o(++fn))},n.processor=l}function Ie(e,t){function n(r){const[l,a]=ln(0),f=Ke({}).current;return f.processor||mn(e,t,f,a),jt(()=>function(){f.processor&&(f.processor.dispose(),f.processor=void 0)},[f]),f.props=r,f.processor.compute(!0),f.jsx}const o=e.replace(/\:/g,"_"),i=new Function("fc",`return function ${o}(props){ return fc(props) }`);return gn(i(n))}function Te(){var e;return((e=oe.getActiveProcessor())===null||e===void 0?void 0:e.id)||""}function vn(e,...t){const n=Ke({}).current;let o=n.store;return o||(n.store=o=e(...t)),typeof o.dispose=="function"&&jt(()=>()=>{o==null||o.dispose()},[o]),o}function gn(e,t){function n(i){let r=this.props.ref,l=r===i.ref;return!l&&r&&(r.call?r(null):r.current=null),t?!t(this.props,i)||!l:bn(this.props,i)}function o(i){return this.shouldComponentUpdate=n,$t(e,i)}return o.displayName="Memo("+(e.displayName||e.name)+")",o.prototype.isReactComponent=!0,o._forwarded=!0,o}function bn(e,t){for(let n in e)if(n!=="__source"&&!(n in t))return!0;for(let n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}var le=(e=>(e[e.ALL=1]="ALL",e[e.ACTIVE=2]="ACTIVE",e[e.COMPLETED=3]="COMPLETED",e))(le||{});function Cn(){return oe.createStore("TodoStore",e=>{const t=e.init({newEntry:"",todos:[],filteredTodos:[],filter:1,nbrOfCompletedTodos:0,itemsLeft:0},{filteredTodos:r=>{let l=[];if(r.filter===1)l=r.todos;else{const a=r.filter===3;l=r.todos.filter(f=>f.completed===a)}oe.updateArray(r.filteredTodos,l)},counters:r=>{const l=r.todos.filter(a=>a.completed).length;r.nbrOfCompletedTodos=l,r.itemsLeft=r.todos.length-l}}),n=t.todos;let o=0;const i={data:t,addTodo(){let r=t.newEntry=t.newEntry.trim();if(r.length){const l=e.add(["Todo",++o],{description:r,editDescription:"",completed:!1,editing:!1});l.description=r,n.push(l)}t.newEntry=""},toggleCompletion(r){r&&(r.completed=!r.completed)},deleteTodo(r){const l=n.indexOf(r);l>-1&&n.splice(l,1)},clearCompleted(){oe.updateArray(n,n.filter(r=>!r.completed))},toggleAllCompleted(){const r=t.nbrOfCompletedTodos>0;n.forEach(l=>{l.completed=!r})},setFilter(r){t.filter=r},startEditing(r){n.forEach(l=>{const a=l===r;l.editing=a,l.editDescription=a?l.description:""})},stopEditing(r,l=!0){if(r.editing){if(l){const a=(r.editDescription||"").trim();if(a===""){i.deleteTodo(r);return}else r.description=a}r.editing=!1,r.editDescription=""}},updateEditDescription(r,l){r.editDescription=l}};return i})}var $n=0;function T(e,t,n,o,i,r){var l,a,f={};for(a in t)a=="ref"?l=t[a]:f[a]=t[a];var y={type:e,props:f,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--$n,__source:i,__self:r};if(typeof e=="function"&&(l=e.defaultProps))for(a in l)f[a]===void 0&&(f[a]=l[a]);return w.vnode&&w.vnode(y),y}const xn=Ie("TodoList",()=>{const e=vn(Cn),t=e.data;return T("div",{"data-id":Te(),className:"todoList",children:[T("section",{className:"todoapp",children:[T("header",{className:"header",children:[T("h1",{children:" todos "}),T("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",autoFocus:!0,autoComplete:"off",value:t.newEntry,onChange:n=>{var o;return t.newEntry=((o=n.target)==null?void 0:o.value)||""},onKeyUp:n=>n.key==="Enter"&&e.addTodo()})]}),t.todos.length===0?"":T(Pn,{tds:e})]}),T("footer",{className:"info",children:[T("p",{children:"Double-click to edit a todo"}),T("p",{children:[T("a",{href:"https://todomvc.com",children:"TodoMVC"}),"  + ",T("a",{href:"https://github.com/traxjs/trax",children:"Trax"}),"  + ",T("a",{href:"https://preactjs.com/",children:"Preact"})]}),T("p",{children:T("a",{href:"https://github.com/traxjs/todomvc",children:"View Source"})})]})]})}),Pn=Ie("TodoItems",e=>{const{tds:t}=e,n=t.data,o="toggle-all-"+oe.getTraxId(n);return T(pe,{children:[T("section",{className:"main","data-id":Te(),children:[T("input",{id:o,className:"toggle-all",type:"checkbox",checked:n.itemsLeft===0,onChange:()=>t.toggleAllCompleted()}),T("label",{htmlFor:o,children:" Mark all as complete "}),T("ul",{className:"todo-list",children:n.filteredTodos.map(i=>T(Sn,{todo:i,tds:t},oe.getTraxId(i)))})]}),T(En,{tds:t})]})}),Sn=Ie("TodoItem",e=>{const{tds:t,todo:n}=e,o=Ke(null),i="todo "+(n.editing?"editing ":"")+(n.completed?"completed":"");return T("li",{className:i,"data-id":Te(),children:[T("div",{className:"view",children:[T("input",{className:"toggle",type:"checkbox",checked:n.completed,onChange:()=>t.toggleCompletion(n)}),T("label",{onDblClick:r,children:[" ",n.description," "]}),T("button",{className:"destroy",onClick:()=>t.deleteTodo(n)})]}),n.editing?T("input",{ref:o,type:"text",className:"edit",autoFocus:!0,value:n.editDescription,onChange:a=>{var f;t.updateEditDescription(n,(f=a.target)==null?void 0:f.value)},onKeyUp:a=>l(a.key),onBlur:()=>t.stopEditing(n)}):""]});async function r(){t.startEditing(n),await oe.reconciliation();const a=o.current;a&&a.focus()}function l(a){a==="Enter"||a==="Tab"?t.stopEditing(n):a==="Escape"&&t.stopEditing(n,!1)}}),En=Ie("TodoFooter",e=>{const{tds:t}=e,n=t.data;return T("footer",{className:"footer","data-id":Te(),children:[T("span",{className:"todo-count",children:[T("strong",{children:[" ",n.itemsLeft," "]})," item",n.itemsLeft!==1?"s":""," left"]}),T("ul",{className:"filters",children:[T("li",{children:T("a",{className:n.filter===le.ALL?"selected":"",href:"#/all",onClick:()=>t.setFilter(le.ALL),children:" All "})}),T("li",{children:T("a",{className:n.filter===le.ACTIVE?"selected":"",href:"#/active",onClick:()=>t.setFilter(le.ACTIVE),children:" Active "})}),T("li",{children:T("a",{className:n.filter===le.COMPLETED?"selected":"",href:"#/completed",onClick:()=>t.setFilter(le.COMPLETED),children:" Completed "})})]}),n.nbrOfCompletedTodos>0?T("button",{className:"clear-completed",onClick:()=>t.clearCompleted(),children:" Clear completed "}):""]})});async function kn(){Gt(T("div",{children:T(xn,{})}),document.getElementById("main"))}kn();
